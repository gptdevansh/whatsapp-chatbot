================================================================================
        COMPLETE AZURE DEPLOYMENT GUIDE FOR BEGINNERS
           WhatsApp Chatbot Deployment Tutorial
================================================================================

TABLE OF CONTENTS
=================
1. What is Deployment?
2. Understanding Docker
3. Understanding Azure
4. Azure Deployment Methods (6 Different Ways)
5. Our Deployment Method (Docker + Azure App Service)
6. Step-by-Step Deployment Guide
7. How to Update Your App
8. Troubleshooting
9. Cost Breakdown
10. Quick Reference Commands

================================================================================
SECTION 1: WHAT IS DEPLOYMENT?
================================================================================

SIMPLE EXPLANATION:
-------------------
Deployment = Making your app available on the internet 24/7

Think of it like this:
- Your Laptop = Your home kitchen (only you can access)
- Deployment = Opening a restaurant (everyone can access)

WHY DEPLOY?
-----------
âœ“ Your app runs 24/7 (even when your laptop is off)
âœ“ Anyone can access it from anywhere
âœ“ Reliable and fast
âœ“ Professional and scalable

================================================================================
SECTION 2: UNDERSTANDING DOCKER
================================================================================

WHAT IS DOCKER?
---------------
Docker = A box that contains everything your app needs to run

Imagine you're moving to a new house:
- Without Docker: Pack clothes, furniture, appliances separately (messy!)
- With Docker: Everything in one container (organized!)

DOCKER TERMS EXPLAINED:
-----------------------

1. DOCKERFILE (Recipe)
   - A file that tells Docker how to build your app container
   - Like a recipe book

   Example:
   FROM python:3.11-slim          â†’ Start with Python
   COPY . /app                     â†’ Copy your code
   RUN pip install requirements    â†’ Install dependencies
   CMD ["python", "app.py"]        â†’ Run the app

2. DOCKER IMAGE (Packed Box)
   - The actual package containing your app + all dependencies
   - Your Image = Your Code + Python + Libraries + Everything

3. DOCKER CONTAINER (Running Box)
   - A running instance of your image
   - Image = Recipe book (static)
   - Container = Cooked meal (running)

WHY DOCKER FOR DEPLOYMENT?
--------------------------
âœ“ Works Everywhere: "It works on my machine" â†’ "It works everywhere!"
âœ“ Consistent: Same environment on your laptop and server
âœ“ Easy to Update: Change code â†’ Rebuild â†’ Deploy
âœ“ Isolated: Your app won't interfere with other apps

================================================================================
SECTION 3: UNDERSTANDING AZURE
================================================================================

WHAT IS AZURE?
--------------
Microsoft Azure = A huge computer center that you rent

Think of it as:
- Your Laptop = Your car (limited, you maintain it)
- Azure = Uber (always available, someone else maintains it)

KEY AZURE CONCEPTS:
-------------------

1. SUBSCRIPTION
   - Your Azure account (like a Netflix subscription)
   - You have: Azure for Students (â‚¹7,500 free credits)

2. RESOURCE GROUP
   - A folder to organize your resources
   - Your Resource Group: whatsapp-chatbot-resources
   - Contains: App Service Plan, Web App

3. APP SERVICE
   - A place to run web apps (like renting an apartment)
   - Handles: Hosting, scaling, monitoring
   - Your App: wtbot-chatbot

4. APP SERVICE PLAN
   - The actual server/computer your app runs on
   - Your Plan: B1 Basic (1 core, 1.75 GB RAM)
   - Cost: â‚¹1,044/month

================================================================================
SECTION 4: AZURE DEPLOYMENT METHODS
================================================================================

METHOD 1: DIRECT CODE DEPLOYMENT (Simplest)
--------------------------------------------
Flow: Your Code â†’ Azure (Azure builds and runs it)

PROS:
âœ“ Very simple for beginners
âœ“ No Docker knowledge needed
âœ“ Quick to setup

CONS:
âœ— Less control over environment
âœ— Harder to replicate locally
âœ— Azure decides how to build

BEST FOR: Simple apps, absolute beginners

COMMAND:
az webapp up --name myapp --runtime "PYTHON:3.11"

--------------------------------------------------------------------------------

METHOD 2: GITHUB ACTIONS DEPLOYMENT (Automated)
------------------------------------------------
Flow: Your Code â†’ GitHub â†’ (Automatic) â†’ Azure

PROS:
âœ“ Automatic deployment on git push
âœ“ CI/CD pipeline included
âœ“ Version controlled

CONS:
âœ— Requires GitHub Actions knowledge
âœ— Can be slow (builds on GitHub servers)
âœ— Limited free minutes

BEST FOR: Team projects, frequent updates

--------------------------------------------------------------------------------

METHOD 3: AZURE CONTAINER REGISTRY (ACR) DEPLOYMENT (Azure Native)
-------------------------------------------------------------------
Flow: Your Code â†’ Build Docker â†’ Push to ACR â†’ Azure pulls from ACR

PROS:
âœ“ Azure-native solution
âœ“ Fast deployment (same region)
âœ“ Private container registry
âœ“ Integrated with Azure services

CONS:
âœ— Costs â‚¹410/month
âœ— Requires ACR Tasks (not available on Azure for Students)
âœ— More complex setup

BEST FOR: Enterprise apps, when budget allows

--------------------------------------------------------------------------------

METHOD 4: DOCKER HUB DEPLOYMENT â˜…â˜…â˜… (What We Use!) â˜…â˜…â˜…
---------------------------------------------------------
Flow: Your Code â†’ Build Docker â†’ Push to Docker Hub â†’ Azure pulls from Docker Hub

PROS:
âœ“ FREE (no extra cost)
âœ“ Works with Azure for Students
âœ“ Full control over environment
âœ“ Can test locally before deploying
âœ“ Industry standard

CONS:
âœ— Requires Docker knowledge
âœ— Manual deployment process
âœ— Slightly slower than ACR (different region)

BEST FOR: Production apps, testing phase, budget-conscious

â˜…â˜…â˜… THIS IS WHAT WE IMPLEMENTED FOR YOU! â˜…â˜…â˜…

--------------------------------------------------------------------------------

METHOD 5: FTP DEPLOYMENT (Old School)
--------------------------------------
Flow: Your Code â†’ Upload via FTP â†’ Azure

PROS:
âœ“ Very simple (like copying files)

CONS:
âœ— No automation
âœ— Error-prone
âœ— No version control
âœ— Outdated method

BEST FOR: Small static websites only

--------------------------------------------------------------------------------

METHOD 6: ZIP DEPLOYMENT
------------------------
Flow: Your Code â†’ Zip file â†’ Upload to Azure â†’ Extract and run

PROS:
âœ“ Simple for small apps
âœ“ Quick one-time deployments

CONS:
âœ— No automation
âœ— Manual process
âœ— Not suitable for containers

BEST FOR: Quick tests, demos

================================================================================
SECTION 5: OUR DEPLOYMENT METHOD
================================================================================

WHY DOCKER HUB + AZURE APP SERVICE?
------------------------------------
We chose this because:
1. FREE - No ACR costs (saves â‚¹410/month)
2. RELIABLE - Docker ensures consistency
3. FLEXIBLE - Easy to test locally before deploying
4. PROFESSIONAL - Industry-standard approach
5. WORKS WITH AZURE FOR STUDENTS - No premium features required

HOW IT WORKS:
-------------

Step 1: Your Laptop
        â†“
        Write Code

Step 2: Docker Build
        â†“
        docker build -t myapp:latest
        Create Image

Step 3: Docker Hub
        â†“
        docker push gptdevansh/whatsapp-chatbot:latest
        Upload to Cloud

Step 4: Azure App Service
        â†“
        Azure pulls latest image
        Run 24/7

================================================================================
SECTION 6: STEP-BY-STEP DEPLOYMENT GUIDE
================================================================================

PREREQUISITES:
--------------
Before you start, you need:
1. âœ“ Azure Account (You have: Azure for Students)
2. âœ“ Docker Desktop Installed (You have: Version 28.4.0)
3. âœ“ Docker Hub Account (You have: gptdevansh)
4. âœ“ Azure CLI Installed (You have it)
5. âœ“ Your Code Ready

--------------------------------------------------------------------------------
STEP 1: PREPARE YOUR CODE
--------------------------------------------------------------------------------

Your Project Structure:
whatsapp-chatbot/
â”œâ”€â”€ chatbot-backend/       (Your Python FastAPI code)
â”‚   â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ requirements.txt   (Python dependencies)
â”‚   â””â”€â”€ .env               (Environment variables)
â”œâ”€â”€ chatbot-frontend/      (Your HTML/CSS/JS)
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ styles.css
â”‚   â””â”€â”€ js/
â””â”€â”€ docker/
    â””â”€â”€ Dockerfile         (Docker build instructions)

--------------------------------------------------------------------------------
STEP 2: BUILD DOCKER IMAGE LOCALLY
--------------------------------------------------------------------------------

Open Terminal and run:

cd C:\Users\Devansh\Desktop

docker build -t gptdevansh/whatsapp-chatbot:latest -f whatsapp-chatbot/docker/Dockerfile whatsapp-chatbot

BREAKING IT DOWN:
- docker build â†’ Build a Docker image
- -t gptdevansh/whatsapp-chatbot:latest â†’ Tag/name your image
  * gptdevansh = Your Docker Hub username
  * whatsapp-chatbot = Image name
  * latest = Version tag
- -f whatsapp-chatbot/docker/Dockerfile â†’ Path to Dockerfile
- whatsapp-chatbot â†’ Build context (folder with code)

Verify Image Built:
docker images

You should see:
REPOSITORY                        TAG       SIZE
gptdevansh/whatsapp-chatbot      latest    588MB

--------------------------------------------------------------------------------
STEP 3: TEST LOCALLY (Optional but Recommended)
--------------------------------------------------------------------------------

Run Container Locally:
docker run -p 8000:8000 --env-file chatbot-backend/.env gptdevansh/whatsapp-chatbot:latest

WHAT THIS DOES:
- docker run â†’ Start a container
- -p 8000:8000 â†’ Map port 8000 (localhost:8000 â†’ container:8000)
- --env-file â†’ Load environment variables
- Image name â†’ What to run

Test in Browser:
Open: http://localhost:8000

You should see your app working!

Stop Container:
Press Ctrl + C

--------------------------------------------------------------------------------
STEP 4: PUSH TO DOCKER HUB
--------------------------------------------------------------------------------

Login to Docker Hub:
docker login -u gptdevansh

Enter your Docker Hub password when prompted.

Push Image:
docker push gptdevansh/whatsapp-chatbot:latest

WHAT HAPPENS:
- Docker uploads your image to Docker Hub
- Takes 2-5 minutes depending on size
- Image becomes available at: https://hub.docker.com/r/gptdevansh/whatsapp-chatbot

--------------------------------------------------------------------------------
STEP 5: CREATE AZURE RESOURCES
--------------------------------------------------------------------------------

Create Resource Group:
az group create --name whatsapp-chatbot-resources --location centralindia

WHAT'S A RESOURCE GROUP?
A folder to organize all your Azure resources (like a project folder).

Create App Service Plan:
az appservice plan create --name whatsapp-chatbot-plan --resource-group whatsapp-chatbot-resources --is-linux --sku B1

WHAT'S AN APP SERVICE PLAN?
The actual server/computer. B1 = 1 CPU core, 1.75 GB RAM, â‚¹1,044/month.

SKU OPTIONS:
- FREE (F1) = â‚¹0 but very limited
- SHARED (D1) = â‚¹800 but no persistence
- BASIC (B1) = â‚¹1,044 â˜… WE USE THIS
- STANDARD (S1) = â‚¹3,000+ (overkill for testing)

--------------------------------------------------------------------------------
STEP 6: CREATE WEB APP
--------------------------------------------------------------------------------

Create App:
az webapp create --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --plan whatsapp-chatbot-plan --deployment-container-image-name gptdevansh/whatsapp-chatbot:latest

WHAT THIS CREATES:
- A web app named wtbot-chatbot
- URL: https://wtbot-chatbot.azurewebsites.net
- Pulls your Docker image from Docker Hub

Configure Container Settings:
az webapp config container set --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --docker-custom-image-name gptdevansh/whatsapp-chatbot:latest --docker-registry-server-url https://index.docker.io

--------------------------------------------------------------------------------
STEP 7: CONFIGURE ENVIRONMENT VARIABLES
--------------------------------------------------------------------------------

Enable Persistent Storage (So database doesn't get deleted):
az webapp config appsettings set --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --settings WEBSITES_ENABLE_APP_SERVICE_STORAGE=true

Set WhatsApp Credentials:
az webapp config appsettings set --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --settings META_PHONE_NUMBER_ID="747217645151179" META_ACCESS_TOKEN="YOUR_TOKEN" META_VERIFY_TOKEN="whatsapp_verify_token_12345_secure" GROQ_API_KEY="YOUR_KEY" ADMIN_USERNAME="admin" ADMIN_PASSWORD="qwertyuiop" SECRET_KEY="your_secret_key"

Set Port (Azure needs to know which port your app listens on):
az webapp config appsettings set --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --settings WEBSITES_PORT=8000

--------------------------------------------------------------------------------
STEP 8: DEPLOY & RESTART
--------------------------------------------------------------------------------

Restart App:
az webapp restart --name wtbot-chatbot --resource-group whatsapp-chatbot-resources

Wait for Startup:
Wait 2-3 minutes for the container to start.

Check Status:
az webapp show --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --query state

Should show: "Running"

--------------------------------------------------------------------------------
STEP 9: VERIFY DEPLOYMENT
--------------------------------------------------------------------------------

Test Health Endpoint:
Open in browser: https://wtbot-chatbot.azurewebsites.net/health

Should show:
{
  "status": "healthy",
  "service": "whatsapp-ai-backend",
  "version": "1.0.0"
}

Test Admin Login:
1. Go to: https://wtbot-chatbot.azurewebsites.net/admin/login
2. Login with: admin / qwertyuiop
3. Should see dashboard with stats

Test WhatsApp:
Send a message to your WhatsApp bot number. You should get an AI response!

================================================================================
SECTION 7: HOW TO UPDATE YOUR APP
================================================================================

WHEN YOU MAKE CODE CHANGES:
----------------------------

Step 1: Make Changes
Edit your code locally.

Step 2: Rebuild Docker Image
cd C:\Users\Devansh\Desktop
docker build -t gptdevansh/whatsapp-chatbot:latest -f whatsapp-chatbot/docker/Dockerfile whatsapp-chatbot

Step 3: Push to Docker Hub
docker push gptdevansh/whatsapp-chatbot:latest

Step 4: Restart Azure App
az webapp restart --name wtbot-chatbot --resource-group whatsapp-chatbot-resources

That's it! Azure will pull the latest image and restart.

================================================================================
SECTION 8: TROUBLESHOOTING
================================================================================

PROBLEM 1: APP NOT STARTING
----------------------------
Check Logs:
az webapp log tail --name wtbot-chatbot --resource-group whatsapp-chatbot-resources

Common Causes:
âœ— Wrong port (should be 8000)
âœ— Missing environment variables
âœ— Docker image not found

--------------------------------------------------------------------------------

PROBLEM 2: DATABASE KEEPS RESETTING
------------------------------------
Check Setting:
az webapp config appsettings list --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --query "[?name=='WEBSITES_ENABLE_APP_SERVICE_STORAGE']"

Should be true.

Fix:
az webapp config appsettings set --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --settings WEBSITES_ENABLE_APP_SERVICE_STORAGE=true

--------------------------------------------------------------------------------

PROBLEM 3: WHATSAPP NOT RESPONDING
-----------------------------------
Check Token (Meta access tokens expire):
az webapp config appsettings set --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --settings META_ACCESS_TOKEN="NEW_TOKEN"

Then restart:
az webapp restart --name wtbot-chatbot --resource-group whatsapp-chatbot-resources

--------------------------------------------------------------------------------

PROBLEM 4: "IMAGE NOT FOUND" ERROR
-----------------------------------
Verify Image Exists:
docker images gptdevansh/whatsapp-chatbot

Check Docker Hub:
Go to: https://hub.docker.com/r/gptdevansh/whatsapp-chatbot

Make Sure It's Public:
Docker Hub â†’ Your Image â†’ Settings â†’ Make Public

================================================================================
SECTION 9: COST BREAKDOWN
================================================================================

CURRENT MONTHLY COST: â‚¹1,044
-----------------------------

Azure App Service (B1):  â‚¹1,044/month
Docker Hub (Free):       â‚¹0/month
Azure Storage:           â‚¹0/month (included in B1)
-----------------------------------------
TOTAL:                   â‚¹1,044/month

WITH YOUR AZURE FOR STUDENTS CREDITS:
--------------------------------------
Starting Credits:        â‚¹7,500
Monthly Cost:            â‚¹1,044
-----------------------------------------
Free Months:             ~7 months
After Credits Expire:    â‚¹1,044/month

COMPARISON:
-----------
                     Cost/Month
Our Method:          â‚¹1,044  â˜… Best Value
With ACR:            â‚¹1,454
Free Tier:           â‚¹0     (But limited, data loss)

================================================================================
SECTION 10: QUICK REFERENCE COMMANDS
================================================================================

BUILD & DEPLOY:
---------------
# 1. Build
docker build -t gptdevansh/whatsapp-chatbot:latest -f whatsapp-chatbot/docker/Dockerfile whatsapp-chatbot

# 2. Push
docker push gptdevansh/whatsapp-chatbot:latest

# 3. Restart Azure
az webapp restart --name wtbot-chatbot --resource-group whatsapp-chatbot-resources

CHECK STATUS:
-------------
# App status
az webapp show --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --query state

# View logs
az webapp log tail --name wtbot-chatbot --resource-group whatsapp-chatbot-resources

UPDATE SETTINGS:
----------------
# Update environment variable
az webapp config appsettings set --name wtbot-chatbot --resource-group whatsapp-chatbot-resources --settings KEY=VALUE

================================================================================
KEY TAKEAWAYS
================================================================================

WHAT YOU LEARNED:
-----------------
1. Docker = Package your app + dependencies
2. Docker Image = The package (static)
3. Docker Container = Running package (active)
4. Docker Hub = Cloud storage for images (free)
5. Azure App Service = Server to run your app
6. App Service Plan = The actual hardware (B1 = â‚¹1,044/month)
7. Resource Group = Folder to organize resources
8. Persistent Storage = Keep data across restarts

DEPLOYMENT FLOW:
----------------
Code â†’ Docker Build â†’ Docker Hub â†’ Azure â†’ Live App (24/7)

MONTHLY COST:
-------------
B1 App Service Only = â‚¹1,044/month âœ“ (What you have)

YOUR DEPLOYED APP:
------------------
URL:    https://wtbot-chatbot.azurewebsites.net
Admin:  https://wtbot-chatbot.azurewebsites.net/admin/login
Docs:   https://wtbot-chatbot.azurewebsites.net/docs

================================================================================
ðŸŽ‰ CONGRATULATIONS! 
You now understand Azure deployment with Docker!
================================================================================

Need help? Just ask! ðŸ˜Š

File created: October 16, 2025
